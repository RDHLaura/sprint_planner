import{u as S,a as f,A as g,e as z,b as $}from"./login-64ea77fc.js";import{_ as w,u as C,o as i,c,t as d,b as u,a as e,j as _,n as p,F as b,g as A,p as D,e as T,w as y,v,k as I,d as E,r as x,f as k}from"./index-ef2b0b28.js";function F(t,s,r){if(t==null)return[];if(!Array.isArray(t))throw new TypeError("sort-json-array expects an array.");if(arguments.length===1)return t.sort();if(arguments[2]==null||arguments[2]=="asc")return t.sort(U(s,1));if(arguments[2]=="des")return t.sort(U(s,0));throw new TypeError("Wrong argument.")}function U(t,s){return s?function(r,l){var o=r[t]===null?"":""+r[t],n=l[t]===null?"":""+l[t];return o<n?-1:o>n?1:0}:function(r,l){var o=r[t]===null?"":""+r[t],n=l[t]===null?"":""+l[t];return o<n?1:o>n?-1:0}}var q=F;const V={name:"ListadoTareas",props:{propietario:{type:Boolean}},data(){return{data:{},tareas:[],usuarios:S,todoStatus:["no-empezado","en-proceso","terminada"],isSortedAsc:{descripcion:!0,fecha_entrega:!0,estado:!0,nameUserAsigned:!0},esCreador:!1,msg:""}},mounted(){const t=C();f.get(g+"/tareas?proyecto="+t.params.id).then(s=>{this.data=s.data,s.data.content.map(r=>{this.propietario?this.tareas.push({...r,nameUserAsigned:this.usuarios[r.asignada_a].username}):z(r.asignada_a)&&this.tareas.push({...r,nameUserAsigned:this.usuarios[r.asignada_a].username})})}).catch(s=>{console.log(s)})},methods:{sorteBy(t){this.isSortedAsc[t]?q(this.tareas,t,"asc"):q(this.tareas,t,"des"),this.isSortedAsc[t]=!this.isSortedAsc[t]},changeStatus(t,s){let r=this.todoStatus.indexOf(s);++r>2&&(r=0),this.tareas.map(l=>{l.id==t&&(l.estado=this.todoStatus[r])})},getUser(t){return this.usuarios[t].username},eliminar(t){f.delete(g+"/tareas/"+t).then(s=>{s.status==200&&(this.msg="Tarea borrada correctamente.",this.$emit("componenteCreado"))}).catch(s=>{console.log(s)})}}},j=t=>(D("data-v-26c33680"),t=t(),T(),t),L={class:"mt-5"},N=j(()=>e("h2",{class:"my-4 display-4"},"Listado de tareas:",-1)),M={key:0,class:"p-3 mb-2",style:{"background-color":"#C6EDE2"}},G={key:1,class:"my-4 fs-3"},P={key:2,class:"my-4 fs-3"},W={key:3,class:"table"},J={class:"table-light fs-5 fw-bold"},O={class:"proyects-card"},R={scope:"col w-25",style:{width:"40%"}},H={scope:"col",style:{width:"20%"}},K={scope:"col",style:{width:"20%"}},Q={scope:"col",style:{width:"20%"}},X={class:"pt-3"},Y={class:"fs-4"},Z={class:"pt-3"},tt={class:"pt-3"},et={class:"d-flex justify-content-start align-items-center"},st=["onClick"],ot={class:"fs-4"},at={class:"pt-3"},nt={key:0,class:"pt-3"},rt=["onClick"];function it(t,s,r,l,o,n){return i(),c("div",L,[N,o.msg!==""?(i(),c("div",M,d(this.msg),1)):u("",!0),o.tareas.length===0&&r.propietario?(i(),c("h3",G," Aún no has creado tareas")):u("",!0),o.tareas.length===0&&!r.propietario?(i(),c("h3",P," Aún no se te han asignado tareas")):u("",!0),o.tareas.length!==0?(i(),c("table",W,[e("thead",J,[e("tr",O,[e("th",R,[_("Título "),e("button",{type:"button",class:"btn",onClick:s[0]||(s[0]=a=>n.sorteBy("descripcion"))},[e("i",{class:p({"bi bi-sort-down":o.isSortedAsc.descripcion===!1,"bi bi-sort-down-alt":o.isSortedAsc.descripcion})},null,2)])]),e("th",H,[_("Entrega "),e("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=a=>n.sorteBy("fecha_entrega"))},[e("i",{class:p({"bi bi-sort-down":o.isSortedAsc.fecha_entrega===!1,"bi bi-sort-down-alt":o.isSortedAsc.fecha_entrega})},null,2)])]),e("th",K,[_("Estado "),e("button",{type:"button",class:"btn",onClick:s[2]||(s[2]=a=>n.sorteBy("estado"))},[e("i",{class:p({"bi bi-sort-down":o.isSortedAsc.estado===!1,"bi bi-sort-down-alt":o.isSortedAsc.estado})},null,2)])]),e("th",Q,[_("Asignada a "),e("button",{type:"button",class:"btn",onClick:s[3]||(s[3]=a=>n.sorteBy("nameUserAsigned"))},[e("i",{class:p({"bi bi-sort-down":o.isSortedAsc.nameUserAsigned===!1,"bi bi-sort-down-alt":o.isSortedAsc.nameUserAsigned})},null,2)])])])]),e("tbody",null,[(i(!0),c(b,null,A(o.tareas,a=>(i(),c("tr",{key:a.id},[e("td",X,[_(d(a.titulo)+" ",1),e("p",Y,d(a.descripcion),1)]),e("td",Z,d(a.fecha_entrega),1),e("td",tt,[e("div",et,[e("div",{class:p(["status-indicator mb-1 me-2",{"status-indicator-todo":a.estado==="no-empezado","status-indicator-ongoing":a.estado==="en-proceso","status-indicator-finished":a.estado==="terminada"}])},null,2),e("div",{class:p(["status-text",{"status-text-todo":a.estado==="no-empezado","status-text-ongoing":a.estado==="en-proceso","status-text-finished":a.estado==="terminada"}]),onClick:h=>n.changeStatus(a.id,a.estado)},[e("p",ot,d(a.estado),1)],10,st)])]),e("td",at,d(a.nameUserAsigned),1),r.propietario?(i(),c("td",nt,[e("a",{onClick:h=>n.eliminar(a.id),class:"bi bi-x-octagon fs-4 status-text-todo"},null,8,rt)])):u("",!0)]))),128))])])):u("",!0)])}const ct=w(V,[["render",it],["__scopeId","data-v-26c33680"]]);const lt={name:"taskForm",data(){return{formData:{titulo:"",asignada_a:null,descripcion:"",fecha_entrega:"",id_proyecto:null,estado:"no-empezado"},usuarios:S,proyecto:{}}},mounted(){const t=C();f.get(g+"/proyectos/"+t.params.id).then(s=>{this.proyecto=s.data,this.formData.id_proyecto=this.proyecto.id}).catch(s=>{console.log(s)})},methods:{submitForm(){this.formData.titulo!==""&&this.formData.descripcion!==""&&this.formData.asignada_a!==null&&this.formData.fecha_entrega!==""?f.post(g+"/tareas",this.formData).then(t=>{t.status==200&&this.$emit("actualizar")}):console.log("Faltan datos")},getUser(t){return this.usuarios[t].username}}},m=t=>(D("data-v-3b9e3ced"),t=t(),T(),t),dt={class:"d-flex flex-column text-center align-items-center justify-content-center"},ut={class:"input-group input-group-sm"},pt=m(()=>e("span",{class:"input-group-text fs-4 p-2",id:"inputGroup-sizing-sm",style:{width:"10rem"}},"Título tarea",-1)),_t={class:"input-group input-group-sm"},mt=m(()=>e("span",{class:"input-group-text fs-4 p-2",id:"inputGroup-sizing-sm",style:{width:"10rem"}},"Asignada a:",-1)),ht=m(()=>e("option",{selected:""},"Miembro equipo ",-1)),ft=["value"],gt={class:"input-group input-group-sm"},yt=m(()=>e("span",{class:"input-group-text fs-4 p-2",style:{width:"10rem"}},"Descripción",-1)),bt={class:"input-group input-group-sm"},wt=m(()=>e("span",{class:"input-group-text p-2 fs-3",style:{width:"10rem"}}," Entrega: ",-1)),vt=m(()=>e("input",{type:"submit",value:"Añadir tarea",class:"btn btn-outline-secondary"},null,-1));function xt(t,s,r,l,o,n){return i(),c("div",dt,[e("form",{class:"d-flex flex-column text-center align-items-center justify-content-center p-5 gap-5 w-75",novalidate:"",onSubmit:s[4]||(s[4]=E((...a)=>n.submitForm&&n.submitForm(...a),["prevent"]))},[e("div",ut,[pt,y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.formData.titulo=a),type:"text",class:"form-control fs-5"},null,512),[[v,o.formData.titulo]])]),e("div",_t,[mt,y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>o.formData.asignada_a=a),class:"form-select fs-5","aria-label":"Default select example",id:"asignedTo"},[ht,(i(!0),c(b,null,A(o.proyecto.miembros,a=>(i(),c("option",{key:a,value:a},d(n.getUser(a)),9,ft))),128))],512),[[I,o.formData.asignada_a]])]),e("div",gt,[yt,y(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=a=>o.formData.descripcion=a),class:"form-control","aria-label":"With textarea"},null,512),[[v,o.formData.descripcion]])]),e("div",bt,[wt,y(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>o.formData.fecha_entrega=a),id:"startDate",class:"form-control fs-4",type:"date"},null,512),[[v,o.formData.fecha_entrega]])]),vt],32)])}const kt=w(lt,[["render",xt],["__scopeId","data-v-3b9e3ced"]]);const St={data(){return{showSquare:!1}},methods:{toggleSquare(){this.showSquare=!this.showSquare},actualizar(){this.showSquare=!this.showSquare,this.$emit("componenteCreado")}},components:{newTask:kt}},Ct=t=>(D("data-v-89ae492c"),t=t(),T(),t),At=Ct(()=>e("i",{class:"bi bi-plus-square"},null,-1)),Dt=[At];function Tt(t,s,r,l,o,n){const a=x("newTask");return i(),c("div",null,[o.showSquare?(i(),k(a,{key:0,onActualizar:n.actualizar,class:"square border border-secondary"},null,8,["onActualizar"])):u("",!0),e("button",{id:"toggle-square",onClick:s[0]||(s[0]=(...h)=>n.toggleSquare&&n.toggleSquare(...h))},Dt)])}const Ut=w(St,[["render",Tt],["__scopeId","data-v-89ae492c"]]),qt={name:"proyecto",data(){return{proyecto:{},usuarios:S,creador:null,renderComponent:!0,propietario:!0}},mounted(){const t=C();f.get(g+"/proyectos/"+t.params.id).then(s=>{this.proyecto=s.data,this.creador=this.usuarios[this.proyecto.creador].username,this.propietario=$(this.proyecto.creador)}).catch(s=>{console.log(s)})},components:{ListadoTareas:ct,ButtonNewTask:Ut},methods:{getUser(t){return this.usuarios[t].username},async componenteCreado(){this.renderComponent=!1,await this.$nextTick(()=>{this.renderComponent=!0})}}},Bt={class:"container w-75 vh-100"},zt={class:"display-3 text-center fw-semibold mb-4",style:{color:"#454545 !important"}},$t={class:"bg-light m-3 px-5 py-4 rounded"},It=e("h2",{class:"h3 mb-3 fw-bold"},"Descripción del proyecto:",-1),Et={class:"fs-4 mx-4"},Ft=e("h2",{class:"h3 mb-3 fw-bold"},"Participantes:",-1),Vt={class:"fs-4 mx-4"},jt={class:"mx-3"},Lt={class:"blockquote-footer fs-5 my-5"},Nt={class:"mx-3"};function Mt(t,s,r,l,o,n){const a=x("ListadoTareas"),h=x("ButtonNewTask");return i(),c(b,null,[e("main",Bt,[e("h1",zt,d(o.proyecto.titulo),1),e("div",$t,[It,e("p",Et,d(o.proyecto.descripcion),1),Ft,e("p",Vt,[(i(!0),c(b,null,A(o.proyecto.miembros,B=>(i(),c("span",jt,d(n.getUser(B)),1))),256))])]),e("div",null,[o.renderComponent?(i(),k(a,{key:0,propietario:o.propietario,onComponenteCreado:n.componenteCreado},null,8,["propietario","onComponenteCreado"])):u("",!0)]),e("p",Lt,[_("Encargado del proyecto: "),e("span",Nt,d(this.creador),1)])]),o.propietario?(i(),k(h,{key:0,onComponenteCreado:n.componenteCreado},null,8,["onComponenteCreado"])):u("",!0)],64)}const Wt=w(qt,[["render",Mt]]);export{Wt as default};
